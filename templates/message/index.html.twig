{% extends 'base.html.twig' %}

{% block title %}Private messages{% endblock %}

{% block body %}
    <h1>Private messages</h1>

    {% for user in users %}
        <a href="#">User#{{ user.id }} : {{ user.pseudo }}</a><br>   
    {% endfor %}
    <template id="newForm">
        {{ form_start(form, {'action': path('app_message_new', {'user_receiver_id': 'template_id'})}) }}
            {{ form_widget(form) }}
            <button class="btn">{{ button_label|default('Send') }}</button>
        {{ form_end(form) }}
    </template>
    <template id="deleteForm">
        <form method="post" action="{{ path('app_message_delete', {'id': 'template_id'}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete') }}">
            <button class="btn">Delete</button>
        </form>
    </template>

    <h1>Test</h1>
    <h2 id="add">Add</h2>
    <h2 id="delete">Delete</h2>
    <script>
        const template = document.querySelector('#newForm');
        const clone = template.content.cloneNode(true);
        document.querySelector('h2#add').after(clone);

        const template2 = document.querySelector('#deleteForm');
        const clone2 = template2.content.cloneNode(true);
        document.querySelector('h2#delete').after(clone2);
    </script>
{% endblock %}
